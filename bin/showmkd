#!/bin/sh

prereq_prog="pandoc firefox perl"


if test $# = 0
then
    echo "specify markdown document." >&2
    exit -1

fi


for i in $prereq_prog
do
    if test ! -x `which $i`
    then
        echo "prereq program '$i' was not found..." >&2
        exit -1
    fi
done


if test $# = 0
then
    fname=`perl -e 'print join q(), time, q(.html)'`
else
    fname=$1
fi

if test ! -f $1
then
    echo "$1: No such a file" >&2
    exit -1
fi

pandoc $1 > /tmp/$fname
firefox /tmp/$fname
# NOTE: not found if firefox reloads.
# rm /tmp/$fname
